<div class="certificate-verification-container">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-section">
    <div class="text-center py-5">
      <div class="spinner-border text-primary mb-3" role="status" style="width: 3rem; height: 3rem;">
        <span class="visually-hidden">Verificando certificado...</span>
      </div>
      <h4>Verificando Certificado</h4>
      <p class="text-muted">Por favor espere mientras verificamos la autenticidad del certificado...</p>
    </div>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="error-section">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-8">
          <div class="card border-danger">
            <div class="card-header bg-danger text-white text-center">
              <h4 class="mb-0">
                <i class="fas fa-exclamation-triangle me-2"></i>
                Certificado No Válido
              </h4>
            </div>
            <div class="card-body text-center">
              <i class="fas fa-times-circle fa-4x text-danger mb-3"></i>
              <h5 class="text-danger">{{ error }}</h5>
              <p class="text-muted">
                El certificado con código <strong>{{ certificateCode }}</strong> no pudo ser verificado.
              </p>
              <hr>
              <p class="small text-muted mb-0">
                Si cree que esto es un error, por favor contacte a ASECAPT para verificación manual.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Valid Certificate Display -->
  <div *ngIf="certificateData?.valid && !isLoading" class="certificate-display">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-10 col-lg-8">
          
          <!-- Certificate Header -->
          <div class="certificate-header text-center mb-4">
            <div class="card border-success">
              <div class="card-header bg-success text-white">
                <h3 class="mb-0">
                  <i class="fas fa-certificate me-2"></i>
                  Certificado Verificado
                </h3>
              </div>
              <div class="card-body">
                <div class="verification-badge mb-3">
                  <i class="fas fa-check-circle fa-4x text-success"></i>
                </div>
                <h4 class="text-success">✓ CERTIFICADO AUTÉNTICO</h4>
                <p class="text-muted mb-0">
                  Este certificado ha sido verificado exitosamente en el sistema ASECAPT
                </p>
              </div>
            </div>
          </div>

          <!-- Certificate Details -->
          <div class="certificate-details">
            
            <!-- ASECAPT Branding -->
            <div class="card mb-4">
              <div class="card-header bg-primary text-white text-center">
                <h4 class="mb-0">ASECAPT</h4>
                <small>Asociación Especialista en Capacitaciones para Profesionales y Técnicos</small>
              </div>
            </div>

            <!-- Student Information -->
            <div class="card mb-4">
              <div class="card-header">
                <h5 class="mb-0">
                  <i class="fas fa-user-graduate me-2 text-primary"></i>
                  Información del Estudiante
                </h5>
              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-md-6">
                    <p><strong>Nombre:</strong> {{ getStudentFullName() }}</p>
                    <p><strong>Documento:</strong> {{ getStudentDocument() }}</p>
                  </div>
                  <div class="col-md-6">
                    <p><strong>Email:</strong> {{ getStudentEmail() }}</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Program Information -->
            <div class="card mb-4">
              <div class="card-header">
                <h5 class="mb-0">
                  <i class="fas fa-book me-2 text-primary"></i>
                  Información del Programa
                </h5>
              </div>
              <div class="card-body">
                <h6 class="text-primary">{{ getProgramTitle() }}</h6>
                <p class="text-muted">{{ getProgramDescription() }}</p>
                <div class="row">
                  <div class="col-md-6">
                    <p><strong>Duración:</strong> {{ getProgramDuration() }}</p>
                  </div>
                  <div class="col-md-6">
                    <p><strong>Créditos:</strong> {{ getProgramCredits() }}</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Academic Information -->
            <div class="card mb-4">
              <div class="card-header">
                <h5 class="mb-0">
                  <i class="fas fa-chart-line me-2 text-primary"></i>
                  Información Académica
                </h5>
              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-md-4">
                    <div class="text-center">
                      <h6>Estado</h6>
                      <span [class]="getStatusBadgeClass(getEnrollmentStatus())">
                        {{ getStatusText(getEnrollmentStatus()) }}
                      </span>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="text-center">
                      <h6>Nota Final</h6>
                      <span [class]="'h4 ' + getGradeColorClass(getFinalGrade())">
                        {{ getFinalGrade() || 'N/A' }}
                      </span>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="text-center">
                      <h6>Asistencia</h6>
                      <span [class]="'h4 ' + getAttendanceColorClass(getAttendancePercentage())">
                        {{ getAttendancePercentage() || 'N/A' }}%
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Certificate Information -->
            <div class="card mb-4">
              <div class="card-header">
                <h5 class="mb-0">
                  <i class="fas fa-info-circle me-2 text-primary"></i>
                  Información del Certificado
                </h5>
              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-md-6">
                    <p><strong>Código:</strong> <code>{{ getCertificateCode() }}</code></p>
                    <p><strong>Fecha de Emisión:</strong> {{ formatDate(getIssuedDate()) }}</p>
                  </div>
                  <div class="col-md-6">
                    <p><strong>Fecha de Matriculación:</strong> {{ formatDate(getEnrollmentDate()) }}</p>
                    <p><strong>Fecha de Finalización:</strong> {{ formatDate(getCompletionDate()) }}</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Actions -->
            <div class="text-center mb-4">
              <button class="btn btn-primary btn-lg me-2" (click)="printCertificate()">
                <i class="fas fa-print me-2"></i>
                Imprimir Certificado
              </button>
            </div>

            <!-- Footer -->
            <div class="card">
              <div class="card-body text-center">
                <p class="text-muted mb-0">
                  <small>
                    <i class="fas fa-shield-alt me-1"></i>
                    Este certificado ha sido verificado digitalmente. 
                    Para más información, visite 
                    <a href="https://asecapt.com" target="_blank">www.asecapt.com</a>
                  </small>
                </p>
                <p class="text-muted mb-0">
                  <small>
                    Verificado el {{ getCurrentDate() }}
                  </small>
                </p>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>